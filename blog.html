<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Blog</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- fonts -->
      <link href="https://fonts.googleapis.com/css?family=Poppins:400,700|Righteous&display=swap" rel="stylesheet">
      <!-- owl stylesheets --> 
      <link rel="stylesheet" href="css/owl.carousel.min.css">
      <link rel="stylesheet" href="css/owl.theme.default.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
   </head>
   <body>
      <!-- header section start -->
      <div class="header_section">
         <div class="header_main">
            <div class="mobile_menu">
               <nav class="navbar navbar-expand-lg navbar-light bg-light">
                  <div class="logo_mobile"><a href="index.html"><img src="images/logo.png"></a></div>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNav">
                     <ul class="navbar-nav">
                        <li class="nav-item">
                           <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="services.html">Offerte</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link " href="blog.html">Area Riservata</a>
                        </li>
                        <li class="nav-item">
                           <a class="nav-link" href="about.html">About us</a>
                        </li>
                     </ul>
                  </div>
               </nav>
            </div>
            <div class="container-fluid">
               <div class="logo"><a href="index.html"><img src="images/logo.png"></a></div>
               <div class="menu_main">
                  <ul>
                     <li class="active"><a href="index.html">Home</a></li>
                     <li><a href="services.html">Offerte</a></li>
                     <li><a href="blog.html">Area Riservata</a></li>
                     <li><a href="about.html">About</a></li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
      <!-- header section end -->
      <div id="mainDiv">
         <div id="login" >
            <div style="height: 600px; text-align: center;">
               <h1 class="services_taital" style="color: #006eff; margin-top: 60px;">Area riservata</h1>
               <input style="margin-top: 30px;" type="text" id="username" placeholder="Username"><br/>
               <input type="password" style="margin-top: 20px;" id="password" placeholder="Password"><br/>
               <button style="margin-top: 20px; color: white; width: 100px; background-color: #006eff; border-radius: 2px;" onclick="login();">Log In</button>
               <p class="services_text" id="errorText" style="color: red; display: none;">Attenzione! Username o password incorretti.</p>
            </div>
         </div>
         <div id="utente2" class="d-none">
            <div style="text-align: right;">
               <button style="margin-top: 20px; margin-right: 20px; color: #006eff; width: 100px; background-color: white; border-radius: 2px; border: #006eff 1px solid;" onclick="logout();">Log out</button>
            </div>
            <div style="height: 550px; text-align: center;">
               <h1 class="services_taital" style="color: #006eff;">Il tuo QR code</h1>
               <a href="expired.html" target="_blank"><img src="images/valid.png" style="border: 5px solid #006eff; border-radius: 10px; margin-top: 10px; height: 300px; width: 300px;"></a>
               <div style="display: flex; margin-top: 40px;">
                  <p style="margin-left: auto; margin-right: 5px; font-size:25px; color: #006eff; font-weight: bold;">Utente:</p>
                  <p style="margin-left: 5px; margin-right: 20px; font-size:25px; font-weight: 500;">Alberto Bianchi</p>
                  <p style="margin-left: 20px; margin-right: 5px; font-size:25px; color: #006eff; font-weight: bold;">Data di nascita:</p>
                  <p style="margin-left: 5px; margin-right: auto; font-size:25px; font-weight: 500;">29/12/2000</p>
               </div>
            </div>
         </div>
         <div id="utente1" class="d-none">
            <div style="text-align: right;">
               <button style="margin-top: 20px; margin-right: 20px; color: #006eff; width: 100px; background-color: white; border-radius: 2px; border: #006eff 1px solid;" onclick="logout();">Log out</button>
            </div>
            <div style="height: 550px; text-align: center;">
               <h1 class="services_taital" style="color: #006eff;">Il tuo QR code</h1>
               <a href="valid.html" target="_blank"><img src="images/valid.png" style="border: 5px solid #006eff; border-radius: 10px; margin-top: 10px; height: 300px; width: 300px;"></a>
               <div style="display: flex; margin-top: 40px;">
                  <p style="margin-left: auto; margin-right: 5px; font-size:25px; color: #006eff; font-weight: bold;">Utente:</p>
                  <p style="margin-left: 5px; margin-right: 20px; font-size:25px; font-weight: 500;">Mario Rossi</p>
                  <p style="margin-left: 20px; margin-right: 5px; font-size:25px; color: #006eff; font-weight: bold;">Data di nascita:</p>
                  <p style="margin-left: 5px; margin-right: auto; font-size:25px; font-weight: 500;">25/07/2000</p>
               </div>
            </div>
         </div>
         <div id="fornitore" class="d-none">
            <div>
               <button style="margin-top: 20px; margin-right: 20px; margin-left:auto; color: #006eff; width: 100px; background-color: white; border-radius: 2px; border: #006eff 1px solid; float:right;" onclick="logout();">Log out</button>
            </div>
            <div style="height: 550px; text-align: center;">
               <div class="services_section">
                  <div class="container">
                     <h1 class="services_taital" style="color: #006eff;">Le tue offerte</h1>
                     <button id="newBtn" class="new_btn_image">NUOVA INSERZIONE</button>
                     <div class="services_section_2" id="mieOfferte">
                        <div class="row not_last_row">
                           <div class="col-md-4 offer-card">
                              <div style="text-align: left;">
                                 <div class="btn_over_img">
                                    <img src="images/mondadori.jpg" class="services_img">
                                    <button id="modifyBtn0" class="modify_btn_image"><i class="fa fa-pencil"></i></button>
                                    <button id="deleteBtn0" class="delete_btn_image"><i class="fa fa-trash-o"></i></button>
                                 </div>
                                 <h3 class="services_taital_internal" id="titoloSconto_0">Titolo sconto</h3>
                                 <p class="services_text_date" id="validita_0">Validità: dal 12/02/2023 al 15/02/2023</p>
                                 <p class="services_text" id="descrizione_0">Vieni ad usufruire dello sconto del 20% su tutti gli articoli della nuova collezione! Lorem ipsum, dolor sit amet consectetur adipisicing elit.</p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- new Modal -->
      <div id="newModal" class="modal_custom">
         <!-- Modal content -->
         <div class="modal_custom-content">
            <div class="modal_custom-header">
               <span id="close_btn" class="close_custom">&times;</span>
               <h2 style="width: 80%; color: white; margin-top: 10px;">Compila il form</h2>
            </div>
            <div class="modal_custom-body">
               <div class="row" style="margin-top: 20px;">
                  <div class="col-md-6">
                     <label for="newtitoloSconto">Titolo sconto:&nbsp;</label>
                     <input type="text" id="newtitoloSconto" style="width: 60%;" placeholder="Titolo sconto">
                  </div>
                  <div class="col-md-3">
                     <label for="newdal">Dal:&nbsp;</label>
                     <input type="date" id="newdal">
                  </div>
                  <div class="col-md-3">
                     <label for="newal">Al:&nbsp;</label>
                     <input type="date" id="newal">
                  </div>
               </div>
               <div class="row" style="margin-top: 20px;">
                  <div class="col-md-12">
                     <label for="newtestoSconto" style="float: inline-start;">Testo sconto (Max 300 caratteri):&nbsp;</label>
                     <textarea maxlength="300" rows="4" style="width: 79%;" id="newtestoSconto" placeholder="Inserisci qui la descrizione"></textarea>
                  </div>
               </div>
               <div class="row" style="margin-top: 20px;">
                  <div class="col-md-9">
                     <label for="newuploadBannerImage" style="float: inline-start;">Carica immagine (almeno 600x300):&nbsp;</label>
                     <input type='file' id="newuploadBannerImage" onchange="readURL(this);" />
                     <img id="newbannerImg" src="" style="width:300px; height: 150px;display: none; float: right; border-radius: 10px;">
                  </div>
               </div>
               <div class="row">
                  <p class="services_text" id="errorFormText" style="color: red; display: none; margin-left: 10px; margin-bottom: 20px;">Compila tutti i campi prima di inviare la richiesta!</p>
               </div>
            </div>
            <div class="modal_custom-footer" style="height: 70px;">
               <button class="send_btn_image" onclick="sendRequest()">Invia richiesta di inserimento</button>
            </div>
         </div>
       </div>
       <!-- modify Modal -->
      <div id="modifyModal" class="modal_custom">
         <!-- Modal content -->
         <div class="modal_custom-content">
            <div class="modal_custom-header">
               <span id="modify_close_btn" class="close_custom">&times;</span>
               <h2 style="width: 80%; color: white; margin-top: 10px;">Compila il form</h2>
            </div>
            <div class="modal_custom-body">
               <div class="row" style="margin-top: 20px;">
                  <div class="col-md-6">
                     <label for="modifytitoloSconto">Titolo sconto:&nbsp;</label>
                     <input type="text" id="modifytitoloSconto" style="width: 60%;">
                  </div>
                  <div class="col-md-3">
                     <label for="modifydal">Dal:&nbsp;</label>
                     <input type="date" id="modifydal">
                  </div>
                  <div class="col-md-3">
                     <label for="modifyal">Al:&nbsp;</label>
                     <input type="date" id="modifyal">
                  </div>
               </div>
               <div class="row" style="margin-top: 20px;">
                  <div class="col-md-12">
                     <label for="modifytestoSconto" style="float: inline-start;">Testo sconto (Max 300 caratteri):&nbsp;</label>
                     <textarea maxlength="300" rows="4" style="width: 79%;" id="modifytestoSconto"></textarea>
                  </div>
               </div>
               <div class="row" style="margin-top: 20px;">
                  <div class="col-md-9">
                     <label for="modifyuploadBannerImage" style="float: inline-start;">Carica immagine (almeno 600x300):&nbsp;</label>
                     <input type='file' id="modifyuploadBannerImage" onchange="readModifyURL(this);" />
                     <img id="modifybannerImg" src="" style="width:300px; height: 150px;display: none; float: right; border-radius: 10px;">
                  </div>
               </div>
               <div class="row">
                  <p class="services_text" id="errorFormText_0" style="color: red; display: none; margin-left: 10px; margin-bottom: 20px;">Compila tutti i campi prima di inviare la richiesta!</p>
               </div>
            </div>
            <div class="modal_custom-footer" style="height: 70px;">
               <button class="send_btn_image" onclick="sendModifyRequest()">Invia richiesta di modifica</button>
            </div>
         </div>
       </div>
       <!-- delete Modal -->
      <div id="deleteModal" class="delete_modal_custom">
         <!-- Modal content -->
         <div class="delete_modal_custom-content">
            <div class="delete_modal_custom-header">
               <span id="delete_close_btn" class="close_custom">&times;</span>
               <h2 style="width: 80%; color: white; margin-top: 10px;">Sicuro di voler eliminare questa inserzione?</h2>
            </div>
            <div class="delete_modal_custom-footer" style="height: 70px;">
               <button class="send_btn_image" onclick="sendDeleteRequest()">Invia richiesta di eliminazione</button>
               <button class="annulla_btn_image" onclick="annullaDeleteRequest()">Annulla</button>
            </div>
         </div>
       </div>
      <!-- footer section start -->
      <div class="footer_section layout_padding_light">
         <div class="container">
            <div class="location_main">
               <div class="call_text" style="padding: 0px !important"><img src="images/mail-icon.png"></div>
               <div class="call_text"><p>demo@gmail.com</p></div>
            </div>
         </div>
      </div>
      <!-- footer section end -->
      <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">2023 All Rights Reserved.</p>
         </div>
      </div>
      <!-- copyright section end -->
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/popper.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/plugin.js"></script>
      <!-- sidebar -->
      <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/custom.js"></script>
      <!-- javascript --> 
      <script src="js/owl.carousel.js"></script>
      <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>    
   </body>
</html>

<script>
   $(document).ready(() => {
      
      var articoli = [];
      var sessione = 0;

      if(localStorage.getItem("articoli") == null) {
         var bannerImage = new Image();
         bannerImage.src = "images/mondadori.jpg";
         var imgData = getBase64Image(bannerImage);
         var articolo = { 
            colore: "nero",
            titolo: "Titolo sconto",
            dal: "2023-02-12",
            al: "2023-02-15",
            descrizione: "Vieni ad usufruire dello sconto del 20% su tutti gli articoli della nuova collezione! Lorem ipsum, dolor sit amet consectetur adipisicing elit.",
            immagine: imgData
         };
         articoli.push(articolo);
         localStorage.setItem("articoli", JSON.stringify(articoli));
      } else {
         articoli = JSON.parse(localStorage.getItem("articoli"));
         var htmlToInsert = "";
         var i = 0;
         var closedDiv = true;
         articoli.forEach(articolo => {
            if(i % 3 == 0){
               closedDiv = false
               htmlToInsert += `<div class="row not_last_row">`
            };

            let dalTemp = articolo.dal.split("-").reverse();
            let dal = "";
            dalTemp.forEach(el => {
               dal += el + "/"
            });
            dal = dal.substring(0, dal.length - 1);

            let alTemp = articolo.dal.split("-").reverse();
            let al = "";
            alTemp.forEach(el => {
               al += el + "/"
            });
            al = al.substring(0, al.length - 1);

            htmlToInsert += `<div class="col-md-4 offer-card">
                              <div style="text-align: left;">
                                 <div class="btn_over_img">
                                    <img src="${articolo.immagine}" class="services_img">
                                    <button id="modifyBtn${i}" class="modify_btn_image"><i class="fa fa-pencil"></i></button>
                                    <button id="deleteBtn${i}" class="delete_btn_image"><i class="fa fa-trash-o"></i></button>
                                 </div>
                                 <h3 class="services_taital_internal" id="titoloSconto_${i}">${articolo.titolo}</h3>
                                 <p class="services_text_date" id="validita_${i}">Validità: dal ${dal} al ${al}</p>
                                 <p class="services_text" id="descrizione_${i}">${articolo.descrizione}</p>
                              </div>
                           </div>`;

            if(i % 3 == 2){
               closedDiv = true;
               htmlToInsert += `</div>`
            };

            i++
         });

         if(!closedDiv){
            htmlToInsert += `</div>`
         }

         $("#mieOfferte").html(htmlToInsert);

         i = 0;

         articoli.forEach(articolo => {
            if(articolo.colore == "rosso"){
               $(`#titoloSconto_${i}`).attr(`style`, `color:red`);
               $(`#validita_${i}`).attr(`style`, `color:red`);
               $(`#descrizione_${i}`).attr(`style`, `color:red`);
               $(`#deleteBtn${i}`).removeClass(`delete_btn_image`);
               $(`#deleteBtn${i}`).addClass(`btnDeleteDisabled`);
               $(`#deleteBtn${i}`).attr(`disabled`, ``);
               $(`#modifyBtn${i}`).removeClass(`modify_btn_image`);
               $(`#modifyBtn${i}`).addClass(`btnModifyDisabled`);
               $(`#modifyBtn${i}`).attr(`disabled`, ``);
            } else if (articolo.colore == "verde"){
               $(`#titoloSconto_${i}`).attr(`style`, `color:green`);
               $(`#validita_${i}`).attr(`style`, `color:green`);
               $(`#descrizione_${i}`).attr(`style`, `color:green`);
            } else if (articolo.colore == "giallo"){
               $(`#titoloSconto_${i}`).attr(`style`, `color:orange`);
               $(`#validita_${i}`).attr(`style`, `color:orange`);
               $(`#descrizione_${i}`).attr(`style`, `color:orange`);
            }

            i++;
         });
      }

      if(localStorage.getItem("sessione") == null){
         localStorage.setItem("sessione", sessione);
      } else {
         sessione = parseInt(localStorage.getItem("sessione"));

         switch (sessione) {
            case 0:
               $("#login").removeClass("d-none");
               !$("#utente1").hasClass("d-none") ? $("#utente1").addClass("d-none") : null;
               !$("#utente2").hasClass("d-none") ? $("#utente2").addClass("d-none") : null;
               !$("#fornitore").hasClass("d-none") ? $("#fornitore").addClass("d-none") : null;
               break;
            case 1:
               $("#utente1").removeClass("d-none");
               !$("#login").hasClass("d-none") ? $("#login").addClass("d-none") : null;
               !$("#utente2").hasClass("d-none") ? $("#utente2").addClass("d-none") : null;
               !$("#fornitore").hasClass("d-none") ? $("#fornitore").addClass("d-none") : null;
               break;
            case 2:
               $("#utente2").removeClass("d-none");
               !$("#utente1").hasClass("d-none") ? $("#utente1").addClass("d-none") : null;
               !$("#login").hasClass("d-none") ? $("#login").addClass("d-none") : null;
               !$("#fornitore").hasClass("d-none") ? $("#fornitore").addClass("d-none") : null;
               break;
            case 3:
               $("#fornitore").removeClass("d-none");
               !$("#utente1").hasClass("d-none") ? $("#utente1").addClass("d-none") : null;
               !$("#utente2").hasClass("d-none") ? $("#utente2").addClass("d-none") : null;
               !$("#login").hasClass("d-none") ? $("#login").addClass("d-none") : null;
               break;
         }
      }

      var newmodal = document.getElementById("newModal");
      var newbtn = document.getElementById("newBtn");
      var newspan = document.getElementById("close_btn");

      var deletemodal = document.getElementById("deleteModal");
      var deleteBtns = Array.from(document.getElementsByClassName("delete_btn_image"));
      var deletespan = document.getElementById("delete_close_btn");

      var modifymodal = document.getElementById("modifyModal");
      var modifyBtns = Array.from(document.getElementsByClassName("modify_btn_image"));
      var modifyspan = document.getElementById("modify_close_btn");

      newbtn.onclick = function() {
         newmodal.style.display = "block";
         $("#newtitoloSconto").val("");
         $("#newdal").val("");
         $("#newal").val("");
         $("#newtestoSconto").val("");
         $("#newbannerImg").attr("src", "");
         $("#errorFormText").attr("style", "color: red; display: none; margin-left: 10px; margin-bottom: 20px;");
      }

      newspan.onclick = function() {
         newmodal.style.display = "none";
      }

      window.onclick = function(event) {
         if (event.target == newmodal) {
            newmodal.style.display = "none";
         } else if (event.target == deletemodal) {
            deletemodal.style.display = "none";
         } else if (event.target == modifymodal) {
            modifymodal.style.display = "none";
         }
      }

      deleteBtns.forEach(btn => {
         btn.onclick = function() {
            localStorage.setItem("deleteButtonId", btn.id.substring(btn.id.length - 1))
            deletemodal.style.display = "block";
         }
      });

      deletespan.onclick = function() {
         deletemodal.style.display = "none";
      }

      modifyBtns.forEach(btn => {
         btn.onclick = function() {
            articolo = JSON.parse(localStorage.getItem("articoli"))[btn.id.substring(btn.id.length - 1)];
            $("#modifytitoloSconto").val(articolo.titolo);
            $("#modifydal").val(articolo.dal);
            $("#modifyal").val(articolo.al);
            $("#modifytestoSconto").val(articolo.descrizione);
            $("#modifybannerImg").attr("src", articolo.immagine);
            $("#errorFormText_0").attr("style", "color: red; display: none; margin-left: 10px; margin-bottom: 20px;");
            modifymodal.style.display = "block";
            localStorage.setItem("modifyButtonId", btn.id.substring(btn.id.length - 1))
         }
      });

      modifyspan.onclick = function() {
         modifymodal.style.display = "none";
      }
   });

   function readURL(input) 
   {
       document.getElementById("newbannerImg").style.display = "block";

       if (input.files && input.files[0]) {
           var reader = new FileReader();

           reader.onload = function (e) {
               document.getElementById('newbannerImg').src =  e.target.result;
           }

           reader.readAsDataURL(input.files[0]);
       }
   }

   function readModifyURL(input) 
   {
       document.getElementById("modifybannerImg").style.display = "block";

       if (input.files && input.files[0]) {
           var reader = new FileReader();

           reader.onload = function (e) {
               document.getElementById('modifybannerImg').src =  e.target.result;
           }

           reader.readAsDataURL(input.files[0]);
       }
   }

   logout = () => {
      if(!$("#fornitore").hasClass("d-none")){
         $("#fornitore").addClass("d-none")
      } else if(!$("#utente1").hasClass("d-none")){
         $("#utente1").addClass("d-none")
      } else if(!$("#utente2").hasClass("d-none")){
         $("#utente2").addClass("d-none")
      }

      $("#login").removeClass("d-none");

      localStorage.setItem("sessione", 0);
   }

   login = () => {
      let username = $("#username").val();
      let password = $("#password").val();
      if(username == "utente" && password == "test"){
         $("#login").addClass("d-none");
         $("#utente1").removeClass("d-none");
         localStorage.setItem("sessione", 1);
      } else if (username == "utente2" && password == "test") {
         $("#login").addClass("d-none");
         $("#utente2").removeClass("d-none");
         localStorage.setItem("sessione", 2);
      } else if (username == "fornitore" && password == "test") {
         $("#login").addClass("d-none");
         $("#fornitore").removeClass("d-none");
         localStorage.setItem("sessione", 3);
      } else {
         $("#errorText").attr("style", "color: red;");
         $("#password").val("");
      }
   }

   sendRequest = () => {
      if($("#newtitoloSconto").val() == "" ||
         $("#newdal").val() == "" ||
         $("#newal").val() == "" ||
         $("#newtestoSconto").val() == "" ||
         $("#newbannerImg").attr("src") == "") {
            $("#errorFormText").attr("style", "color: red; margin-left: 10px; margin-bottom: 20px;");
         } else {
            bannerImage = document.getElementById('newbannerImg');
            imgData = getBase64Image(bannerImage);
            articolo = {
               colore: "verde",
               titolo: $("#newtitoloSconto").val(),
               dal: $("#newdal").val(),
               al: $("#newal").val(),
               descrizione: $("#newtestoSconto").val(),
               immagine: imgData
            }
            articoli = JSON.parse(localStorage.getItem("articoli"));
            articoli.push(articolo);
            localStorage.setItem("articoli", JSON.stringify(articoli));
            alert("Richiesta inviata correttamente!");
            document.getElementById("newModal").style.display = "none";
            location.reload();
         }
   }

   sendModifyRequest = () => {
      if($("#modifytitoloSconto").val() == "" ||
         $("#modifydal").val() == "" ||
         $("#modifyal").val() == "" ||
         $("#modifytestoSconto").val() == "") {
            $("#errorFormText").attr("style", "color: red; margin-left: 10px; margin-bottom: 20px;");
         } else {
            imgData = "";
            if($("#modifybannerImg").attr("src") != ""){
               bannerImage = document.getElementById('modifybannerImg');
               imgData = getBase64Image(bannerImage);
            }
            articoli = JSON.parse(localStorage.getItem("articoli"));
            articoli[parseInt(localStorage.getItem("modifyButtonId"))] = {
               colore: "giallo",
               titolo: $("#modifytitoloSconto").val(),
               dal: $("#modifydal").val(),
               al: $("#modifyal").val(),
               descrizione: $("#modifytestoSconto").val()
            }
            imgData != "" ? articoli[parseInt(localStorage.getItem("modifyButtonId"))].immagine = imgData : null;
            localStorage.setItem("articoli", JSON.stringify(articoli));
            alert("Richiesta inviata correttamente!");
            document.getElementById("modifyModal").style.display = "none";
            location.reload();
         }
   }

   sendDeleteRequest = () => {
      articoli = JSON.parse(localStorage.getItem("articoli"));
      articoli[parseInt(localStorage.getItem("deleteButtonId"))].colore = "rosso";
      localStorage.setItem("articoli", JSON.stringify(articoli));
      alert("Richiesta inviata correttamente!");
      document.getElementById("deleteModal").style.display = "none";
      location.reload();
   }

   annullaDeleteRequest = () => {
      document.getElementById("deleteModal").style.display = "none";
   }

   function getBase64Image(img) {
       var canvas = document.createElement("canvas");
       canvas.width = 600;
       canvas.height = 300;

       var ctx = canvas.getContext("2d");
       ctx.drawImage(img, 0, 0);

       var dataURL = canvas.toDataURL("image/png");

       return dataURL;
   }
</script>